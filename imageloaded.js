(function($){jQuery.fn.imgLoad=function(options){var t=0,a=new Array(),b=this;var d={complete : function(){console.log('images loaded');}};var o = {};jQuery.extend(o, d, options);this.c=function(x){if(t < a.length){return;}o.complete.call(x);};return this.each(function(){var e = document.getElementsByTagName('*'),im = document.getElementsByTagName('img'),el;for (var i = 0; i < e.length;i++){el = e[i];if(el.currentStyle){if( el.currentStyle['backgroundImage'] !== 'none'){a.push(jQuery.trim(el.currentStyle['backgroundImage'].replace('url(','').replace(')','').replace('"','').replace('"','')));}}else if(window.getComputedStyle){if(document.defaultView.getComputedStyle(el,null).getPropertyValue('background-image') !== 'none' ){a.push(jQuery.trim(document.defaultView.getComputedStyle(el,null).getPropertyValue('background-image').replace('url(','').replace(')','').replace('"','').replace('"','')));}}}for(var i=0;i<im.length;i++){el = im[i];a.push(el.getAttribute('src'));}for(var i=0;i<a.length;i++){jQuery('<img/>').attr('src', a[i]).load(function() {jQuery(this).remove();t++;b.c(this);});}});};})(jQuery);